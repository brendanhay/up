<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>Super Uploader</title>
  <link rel="stylesheet" href="pycco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1>Super Uploader</h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-0'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-0">#</a>
        </div>
        <h2>Overview</h2>
<p>Example application using minimal dependencies to provide a file upload progress bar.
Utilises a custom multipart form handler and web server written in <code>Erlang</code>, 
vanilla <code>JavaScript</code> and some fairly basic infrastructure to provide a way to
upload a file without postback and track uploads by polling a unique url with <code>XMLHttpRequest</code>.
Please excuse the very sad state of unit testing.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-1'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-1">#</a>
        </div>
        <h2>Documentation</h2>
<p><em>Semi-literate documentation generated using <a href="http://fitzgen.github.com/pycco/">pycco</a>:</em></p>
<h4>Erlang</h4>
<ul>
<li><a href="config.html">config.erl</a> </li>
<li><a href="datastore.html">datastore.erl</a></li>
<li><a href="dispatcher.html">dispatcher.erl</a></li>
<li><a href="logger.html">logger.erl</a></li>
<li><a href="progress.html">progress.erl</a></li>
<li><a href="render.html">render.erl</a></li>
<li><a href="sup.html">sup.erl</a></li>
<li><a href="up.html">up.erl</a></li>
<li><a href="uploader.html">uploader.erl</a></li>
</ul>
<h4>JavaScript</h4>
<ul>
<li><a href="scripts.html">scripts.js</a></li>
</ul>
<h4>HTML</h4>
<ul>
<li><a href="https://github.com/brendanhay/up/blob/develop/templates/application.dtl">application.dtl</a></li>
<li><a href="https://github.com/brendanhay/up/blob/develop/templates/index.dtl">index.dtl</a></li>
<li><a href="https://github.com/brendanhay/up/blob/develop/templates/new.dtl">new.dtl</a></li>
<li><a href="https://github.com/brendanhay/up/blob/develop/templates/progress.dtl">progress.dtl</a></li>
</ul>
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-2'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-2">#</a>
        </div>
        <h2>Dependencies</h2>
<p>You will need <a href="http://www.erlang.org/download.html"><code>Erlang R14</code></a> or higher, 
<a href="http://git-scm.com/"><code>git</code></a>, and a shell.</p>
<p>All other dependencies are managed by the <a href="https://bitbucket.org/basho/rebar/wiki/Home"><code>rebar</code></a> build tool:</p>
<ul>
<li><a href="https://github.com/mochi/mochiweb">mochiweb</a> - Library for building lightweight HTTP servers</li>
<li><a href="https://github.com/evanmiller/erlydtl">ErlyDTL</a> - Django templates for Erlang</li>
</ul>
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-3'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-3">#</a>
        </div>
        <h2>Compiling + Running</h2>
<p>In a shell/terminal, enter the following:</p>
<pre><code>$ git clone git@github.com:brendanhay/up.git
$ cd up
$ ./rebar get-deps
$ ./rebar compile 
$ ./start-dev.sh
</code></pre>
<p>Presuming all goes as planned, you should see a boatload of <code>SASL</code> output in the <code>eshell</code>.</p>
<p>The final line should read something like: </p>
<pre><code>18:40:27 Start: Waiting for connections
</code></pre>
<p>Eureka! Go to <a href="http://localhost:8080">http://localhost:8080</a> in your favourite browser (preferably not <code>MSIE</code>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-4'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-4">#</a>
        </div>
        <h2>Structure</h2>
<p><em>The project directory structure is layed out as follows:</em></p>
<ul>
<li>deps - dependencies</li>
<li>priv/data - <code>mnesia</code> disk copies</li>
<li>priv/www - static assets</li>
<li>priv/www/uploads - uploaded files under <code>id/filename</code></li>
<li>includes - <code>.hrl</code> includes</li>
<li>src - <code>.erl</code> sources and configuration</li>
<li>templates - <code>ErlyDTL</code> uncompiled templates </li>
</ul>
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr><tr id='section-5'>
      <td class=docs>
        <div class="octowrap">
          <a class="octothorpe" href="#section-5">#</a>
        </div>
        <p>2011 <a href="https://github.com/brendanhay/up">Brendan Hay</a></p>
      </td>
      <td class=code>
        <div class='highlight'><pre><div class="highlight"><pre></pre></div></pre></div>
      </td>
    </tr>
  </table>
</div>
</body>
